<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estakaadi Planner - –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –≠—Å—Ç–∞–∫–∞–¥—ã</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Navigation Header -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="#" id="navbar-brand">
                <i class="bi bi-truck"></i> Estakaadi Planner
            </a>
            
            <!-- Language Switcher -->
            <div class="d-flex align-items-center">
                <div class="btn-group me-3" role="group">
                    <button type="button" class="btn btn-outline-light btn-sm" onclick="switchLanguage('ru')" id="lang-ru">üá∑üá∫ RU</button>
                    <button type="button" class="btn btn-outline-light btn-sm" onclick="switchLanguage('ee')" id="lang-ee">üá™üá™ EE</button>
                </div>
                
                <!-- User Info -->
                <span class="text-light me-3" id="user-info">–í—Ö–æ–¥ –∫–∞–∫: <span id="current-user">–ì–æ—Å—Ç—å</span></span>
                <button class="btn btn-outline-light btn-sm" onclick="logout()" id="logout-btn">–í—ã–π—Ç–∏</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container-fluid mt-3">
        <!-- Tab Navigation -->
        <ul class="nav nav-tabs" id="mainTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="intro-tab" data-bs-toggle="tab" data-bs-target="#intro" type="button" role="tab">
                    <i class="bi bi-house"></i> <span data-translate="tab_intro">–í–≤–µ–¥–µ–Ω–∏–µ</span>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="dashboard-tab" data-bs-toggle="tab" data-bs-target="#dashboard" type="button" role="tab">
                    <i class="bi bi-speedometer2"></i> <span data-translate="tab_dashboard">Dashboard</span>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="schedule-tab" data-bs-toggle="tab" data-bs-target="#schedule" type="button" role="tab">
                    <i class="bi bi-calendar3"></i> <span data-translate="tab_schedule">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</span>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="packaging-tab" data-bs-toggle="tab" data-bs-target="#packaging" type="button" role="tab">
                    <i class="bi bi-box-seam"></i> <span data-translate="tab_packaging">–£–ø–∞–∫–æ–≤–∫–∞</span>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="returns-tab" data-bs-toggle="tab" data-bs-target="#returns" type="button" role="tab">
                    <i class="bi bi-arrow-return-left"></i> <span data-translate="tab_returns">–í–æ–∑–≤—Ä–∞—Ç—ã</span>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="notes-tab" data-bs-toggle="tab" data-bs-target="#notes" type="button" role="tab">
                    <i class="bi bi-journal-text"></i> <span data-translate="tab_notes">–ó–∞–º–µ—Ç–∫–∏</span>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="calendar-tab" data-bs-toggle="tab" data-bs-target="#calendar" type="button" role="tab">
                    <i class="bi bi-calendar-check"></i> <span data-translate="tab_calendar">–ì—Ä–∞—Ñ–∏–∫</span>
                </button>
            </li>
            <li class="nav-item" role="presentation" id="admin-tab-item" style="display: none;">
                <button class="nav-link" id="admin-tab" data-bs-toggle="tab" data-bs-target="#admin" type="button" role="tab">
                    <i class="bi bi-gear"></i> <span data-translate="tab_admin">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</span>
                </button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content" id="mainTabContent">
            <!-- Introduction Tab -->
            <div class="tab-pane fade show active" id="intro" role="tabpanel">
                <div class="row mt-4">
                    <div class="col-lg-8 mx-auto">
                        <div class="card">
                            <div class="card-header bg-info text-white">
                                <h4 class="mb-0" data-translate="intro_title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Estakaadi Planner!</h4>
                            </div>
                            <div class="card-body">
                                <p data-translate="intro_description">
                                    –≠—Ç–æ—Ç —Å–∞–π—Ç –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º —ç—Å—Ç–∞–∫–∞–¥—ã —É–¥–æ–±–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤—ã–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É. 
                                    –ß–µ—Ä–µ–∑ –Ω–µ–≥–æ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å, –∫—Ç–æ –∏ —á—Ç–æ –ø—Ä–∏–≤–æ–∑–∏—Ç, –∫–æ–≥–¥–∞ –∏ –∫—É–¥–∞, —á—Ç–æ –∏ –∫–∞–∫ –Ω—É–∂–Ω–æ —É–ø–∞–∫–æ–≤–∞—Ç—å, 
                                    –∞ —Ç–∞–∫–∂–µ —Å–ª–µ–¥–∏—Ç—å –∑–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞–º–∏ –∏ –ø–ª–∞–Ω–æ–º –Ω–∞ –¥–µ–Ω—å.
                                </p>
                                
                                <h5 data-translate="intro_features_title">–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:</h5>
                                <ul>
                                    <li data-translate="intro_feature_1">üìÖ <strong>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</strong> - –≥—Ä–∞—Ñ–∏–∫ –ø–æ—Å—Ç–∞–≤–æ–∫ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏</li>
                                    <li data-translate="intro_feature_2">üì¶ <strong>–£–ø–∞–∫–æ–≤–∫–∞</strong> - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ —É—á–µ—Ç —É–ø–∞–∫–æ–≤–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤</li>
                                    <li data-translate="intro_feature_3">üîÑ <strong>–í–æ–∑–≤—Ä–∞—Ç—ã</strong> - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—Ç–∞–º–∏ —Ç–æ–≤–∞—Ä–æ–≤</li>
                                    <li data-translate="intro_feature_4">üìù <strong>–ó–∞–º–µ—Ç–∫–∏</strong> - –ª–∏—á–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏ –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è</li>
                                    <li data-translate="intro_feature_5">üåç <strong>–î–≤–∞ —è–∑—ã–∫–∞</strong> - —Ä—É—Å—Å–∫–∏–π –∏ —ç—Å—Ç–æ–Ω—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å</li>
                                </ul>
                                
                                <div class="alert alert-info">
                                    <strong data-translate="intro_note_title">–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</strong>
                                    <span data-translate="intro_note_text">
                                        –£ –∫–∞–∂–¥–æ–≥–æ –µ—Å—Ç—å –ª–∏—á–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ, 
                                        –æ–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ - —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–ø–∏—Å–∏.
                                    </span>
                                </div>
                                
                                <div class="text-center mt-4">
                                    <button class="btn btn-primary btn-lg" onclick="showTab('dashboard')" data-translate="intro_start_btn">
                                        –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Tab -->
            <div class="tab-pane fade" id="dashboard" role="tabpanel">
                <div class="row mt-4">
                    <!-- Today's Deliveries -->
                    <div class="col-md-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 data-translate="dashboard_today_title">–°–µ–≥–æ–¥–Ω—è –Ω–∞ —ç—Å—Ç–∞–∫–∞–¥–µ</h5>
                            </div>
                            <div class="card-body">
                                <div id="today-deliveries">
                                    <p data-translate="dashboard_loading">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="col-md-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 data-translate="dashboard_quick_actions">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h5>
                            </div>
                            <div class="card-body">
                                <div class="d-grid gap-2">
                                    <button class="btn btn-outline-primary" onclick="showTab('schedule')">
                                        <i class="bi bi-calendar3"></i> <span data-translate="view_schedule">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</span>
                                    </button>
                                    <button class="btn btn-outline-success" onclick="showTab('packaging')">
                                        <i class="bi bi-box-seam"></i> <span data-translate="add_packaging">–î–æ–±–∞–≤–∏—Ç—å —É–ø–∞–∫–æ–≤–∫—É</span>
                                    </button>
                                    <button class="btn btn-outline-warning" onclick="showTab('returns')">
                                        <i class="bi bi-arrow-return-left"></i> <span data-translate="add_return">–û—Ñ–æ—Ä–º–∏—Ç—å –≤–æ–∑–≤—Ä–∞—Ç</span>
                                    </button>
                                    <button class="btn btn-outline-info" onclick="showTab('notes')">
                                        <i class="bi bi-journal-text"></i> <span data-translate="add_note">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Packaging Stats -->
                    <div class="col-12 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 data-translate="dashboard_packaging_stats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É–ø–∞–∫–æ–≤–∫–∏</h5>
                            </div>
                            <div class="card-body">
                                <div class="row text-center">
                                    <div class="col-md-3">
                                        <div class="stat-card">
                                            <h3 class="text-primary" id="packaging-count">0</h3>
                                            <p class="text-muted" data-translate="packaging_today">–£–ø–∞–∫–æ–≤–æ–∫ —Å–µ–≥–æ–¥–Ω—è</p>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="stat-card">
                                            <h3 class="text-success" id="items-count">0</h3>
                                            <p class="text-muted" data-translate="items_today">–≠–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–µ–≥–æ–¥–Ω—è</p>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="stat-card">
                                            <h3 class="text-warning" id="returns-count">0</h3>
                                            <p class="text-muted" data-translate="returns_today">–í–æ–∑–≤—Ä–∞—Ç–æ–≤ —Å–µ–≥–æ–¥–Ω—è</p>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="stat-card">
                                            <h3 class="text-info" id="notes-count">0</h3>
                                            <p class="text-muted" data-translate="notes_total">–í—Å–µ–≥–æ –∑–∞–º–µ—Ç–æ–∫</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Week Schedule -->
                    <div class="col-md-8 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 data-translate="dashboard_week_schedule">–ì—Ä–∞—Ñ–∏–∫ –Ω–∞ –Ω–µ–¥–µ–ª—é</h5>
                            </div>
                            <div class="card-body">
                                <div id="week-events">
                                    <!-- Week events will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Recent Notes -->
                    <div class="col-md-4 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 data-translate="dashboard_recent_notes">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏</h5>
                            </div>
                            <div class="card-body">
                                <div id="recent-notes">
                                    <!-- Recent notes will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Recent Returns -->
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h5 data-translate="dashboard_recent_returns">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—Ç—ã</h5>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-striped" id="recent-returns-table">
                                        <thead>
                                            <tr>
                                                <th data-translate="returns_date">–î–∞—Ç–∞</th>
                                                <th data-translate="returns_company">–ö–æ–º–ø–∞–Ω–∏—è</th>
                                                <th data-translate="returns_item">–¢–æ–≤–∞—Ä</th>
                                                <th data-translate="returns_quantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                                                <th data-translate="returns_reason">–ü—Ä–∏—á–∏–Ω–∞</th>
                                            </tr>
                                        </thead>
                                        <tbody id="recent-returns-body">
                                            <!-- Recent returns will be loaded here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Schedule Tab -->
            <div class="tab-pane fade" id="schedule" role="tabpanel">
                <div class="mt-4">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h4 data-translate="schedule_title">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ—Å—Ç–∞–≤–æ–∫</h4>
                        <button class="btn btn-success admin-only" style="display: none;" onclick="editSchedule()">
                            <i class="bi bi-pencil"></i> <span data-translate="edit_btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</span>
                        </button>
                    </div>
                    
                    <div class="card">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped" id="schedule-table">
                                    <thead>
                                        <tr>
                                            <th data-translate="schedule_day">–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏</th>
                                            <th data-translate="schedule_companies">–ö–æ–º–ø–∞–Ω–∏–∏</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Schedule data will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Packaging Tab -->
            <div class="tab-pane fade" id="packaging" role="tabpanel">
                <div class="mt-4">
                    <h4 data-translate="packaging_title">–£–ø–∞–∫–æ–≤–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤</h4>
                    
                    <div class="row">
                        <div class="col-md-8">
                            <div class="card">
                                <div class="card-header">
                                    <h5 data-translate="packaging_form_title">–î–æ–±–∞–≤–∏—Ç—å —É–ø–∞–∫–æ–≤–∫—É</h5>
                                </div>
                                <div class="card-body">
                                    <form id="packaging-form">
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label class="form-label" data-translate="packaging_company">–ö–æ–º–ø–∞–Ω–∏—è</label>
                                                <select class="form-select" id="packaging-company" required onchange="updateInstructionsButton()">
                                                    <option value="" data-translate="select_company">–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–ø–∞–Ω–∏—é</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label" data-translate="packaging_date">–î–∞—Ç–∞</label>
                                                <input type="date" class="form-control" id="packaging-date" required>
                                            </div>
                                        </div>
                                        
                                        <!-- Multiple Items Section -->
                                        <div class="mb-3">
                                            <div class="d-flex justify-content-between align-items-center mb-2">
                                                <label class="form-label mb-0" data-translate="packaging_items">–ü–æ–¥—Å—Ç–∞–≤–∫–∏ –∏ –ø–∞–ª–µ—Ç—ã</label>
                                                <button type="button" class="btn btn-sm btn-success" onclick="addPackagingItem()">
                                                    <i class="bi bi-plus"></i> <span data-translate="add_item">–î–æ–±–∞–≤–∏—Ç—å</span>
                                                </button>
                                            </div>
                                            <div id="packaging-items-container">
                                                <!-- Dynamic items will be added here -->
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label" data-translate="packaging_notes">–ü—Ä–∏–º–µ—á–∞–Ω–∏—è</label>
                                            <textarea class="form-control" id="packaging-notes" rows="3"></textarea>
                                        </div>
                                        <div class="d-flex gap-2">
                                            <button type="submit" class="btn btn-primary">
                                                <i class="bi bi-plus"></i> <span data-translate="add_packaging">–î–æ–±–∞–≤–∏—Ç—å —É–ø–∞–∫–æ–≤–∫—É</span>
                                            </button>
                                            <button type="button" class="btn btn-secondary" onclick="cancelPackagingEdit()" id="cancel-edit-btn" style="display: none;">
                                                <i class="bi bi-x"></i> <span data-translate="cancel">–û—Ç–º–µ–Ω–∞</span>
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h5 data-translate="packaging_instructions">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É–ø–∞–∫–æ–≤–∫–µ</h5>
                                </div>
                                <div class="card-body">
                                    <p data-translate="packaging_instruction_text">
                                        –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–ø–∞–Ω–∏—é –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–æ—Ç–æ-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ —É–ø–∞–∫–æ–≤–∫–µ.
                                    </p>
                                    <button class="btn btn-info btn-sm" id="show-instructions-btn" 
                                            onclick="showPackagingInstructionsForSelected()" disabled>
                                        <i class="bi bi-images"></i> <span data-translate="show_instructions">–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</span>
                                    </button>
                                    
                                    <div class="mt-3">
                                        <h6 data-translate="common_items">–¢–∏–ø—ã –ø–∞–ª–µ—Ç –∏ –ø–æ–¥—Å—Ç–∞–≤–æ–∫:</h6>
                                        <ul class="list-unstyled">
                                            <li><i class="bi bi-square"></i> <span data-translate="full_pallets">–¶–µ–ª—ã–µ –ø–∞–ª–µ—Ç—ã</span></li>
                                            <li><i class="bi bi-square-half"></i> <span data-translate="half_pallets">–ü–æ–ª–æ–≤–∏–Ω–∫–∏ (1/2)</span></li>
                                            <li><i class="bi bi-square"></i> <span data-translate="quarter_pallets">–ß–µ—Ç–≤–µ—Ä—Ç–∏–Ω–∫–∏ (1/4)</span></li>
                                            <li><i class="bi bi-cup"></i> <span data-translate="drink_stands">–ü–æ–¥—Å—Ç–∞–≤–∫–∏ –¥–ª—è –Ω–∞–ø–∏—Ç–∫–æ–≤</span></li>
                                            <li><i class="bi bi-grid-3x3"></i> <span data-translate="other_stands">–î—Ä—É–≥–∏–µ –ø–æ–¥—Å—Ç–∞–≤–∫–∏</span></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Packaging History -->
                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 data-translate="packaging_history">–ò—Å—Ç–æ—Ä–∏—è —É–ø–∞–∫–æ–≤–∫–∏</h5>
                                </div>
                                <div class="card-body">
                                    <div id="packaging-history">
                                        <!-- Packaging history will be loaded here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Returns Tab -->
            <div class="tab-pane fade" id="returns" role="tabpanel">
                <div class="mt-4">
                    <h4 data-translate="returns_title">–í–æ–∑–≤—Ä–∞—Ç—ã —Ç–æ–≤–∞—Ä–æ–≤</h4>
                    
                    <div class="row">
                        <div class="col-md-8">
                            <div class="card">
                                <div class="card-header">
                                    <h5 data-translate="returns_form_title">–û—Ñ–æ—Ä–º–∏—Ç—å –≤–æ–∑–≤—Ä–∞—Ç</h5>
                                </div>
                                <div class="card-body">
                                    <form id="returns-form">
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label class="form-label" data-translate="returns_company">–ö–æ–º–ø–∞–Ω–∏—è</label>
                                                <select class="form-select" id="returns-company" required onchange="updateReturnsInstructionsButton()">
                                                    <option value="" data-translate="select_company">–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–ø–∞–Ω–∏—é</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label" data-translate="returns_item">–¢–∏–ø –ø–∞–ª–µ—Ç—ã/–ø–æ–¥—Å—Ç–∞–≤–∫–∏</label>
                                                <select class="form-select" id="returns-item" required>
                                                    <option value="" data-translate="select_item_type">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</option>
                                                    <option value="whole_pallet" data-translate="whole_pallet">–¶–µ–ª–∞—è –ø–∞–ª–µ—Ç–∞</option>
                                                    <option value="half_pallet" data-translate="half_pallet">–ü–æ–ª–æ–≤–∏–Ω–∫–∞ (1/2)</option>
                                                    <option value="quarter_pallet" data-translate="quarter_pallet">–ß–µ—Ç–≤–µ—Ä—Ç–∏–Ω–∫–∞ (1/4)</option>
                                                    <option value="drink_stand" data-translate="drink_stand">–ü–æ–¥—Å—Ç–∞–≤–∫–∞ –¥–ª—è –Ω–∞–ø–∏—Ç–∫–æ–≤</option>
                                                    <option value="display_stand" data-translate="display_stand">–í—ã—Å—Ç–∞–≤–æ—á–Ω–∞—è –ø–æ–¥—Å—Ç–∞–≤–∫–∞</option>
                                                    <option value="other_stand" data-translate="other_stand">–î—Ä—É–≥–∞—è –ø–æ–¥—Å—Ç–∞–≤–∫–∞</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label class="form-label" data-translate="returns_quantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–ª–µ—Ç</label>
                                                <input type="number" class="form-control" id="returns-quantity" min="1" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label" data-translate="returns_date">–î–∞—Ç–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞</label>
                                                <input type="date" class="form-control" id="returns-date" required>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label" data-translate="returns_reason">–ü—Ä–∏—á–∏–Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞</label>
                                            <textarea class="form-control" id="returns-reason" rows="3" required></textarea>
                                        </div>
                                        <button type="submit" class="btn btn-warning" data-translate="save_btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h5 data-translate="returns_instructions">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –≤–æ–∑–≤—Ä–∞—Ç–∞–º</h5>
                                </div>
                                <div class="card-body">
                                    <p data-translate="returns_instruction_text">
                                        –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–ø–∞–Ω–∏—é –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é –≤–æ–∑–≤—Ä–∞—Ç–æ–≤.
                                    </p>
                                    <button class="btn btn-warning btn-sm" id="show-returns-instructions-btn" 
                                            onclick="showReturnsInstructionsForSelected()" disabled>
                                        <i class="bi bi-images"></i> <span data-translate="show_instructions">–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</span>
                                    </button>
                                    
                                    <div class="mt-3">
                                        <h6 data-translate="common_returns">–ß–∞—Å—Ç—ã–µ –ø—Ä–∏—á–∏–Ω—ã –≤–æ–∑–≤—Ä–∞—Ç–∞:</h6>
                                        <ul class="list-unstyled">
                                            <li><i class="bi bi-exclamation-triangle text-warning"></i> <span data-translate="damaged_goods">–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä</span></li>
                                            <li><i class="bi bi-calendar-x text-danger"></i> <span data-translate="expired_goods">–ò—Å—Ç–µ–∫—à–∏–π —Å—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏</span></li>
                                            <li><i class="bi bi-arrow-return-left text-info"></i> <span data-translate="excess_delivery">–ò–∑–ª–∏—à–∫–∏ –ø–æ—Å—Ç–∞–≤–∫–∏</span></li>
                                            <li><i class="bi bi-x-circle text-secondary"></i> <span data-translate="wrong_item">–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–æ–≤–∞—Ä</span></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Notes Tab -->
            <div class="tab-pane fade" id="notes" role="tabpanel">
                <div class="mt-4">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h4 data-translate="notes_title">–ó–∞–º–µ—Ç–∫–∏</h4>
                        <button class="btn btn-primary" onclick="addNote()" data-translate="notes_add_btn">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É</button>
                    </div>
                    
                    <div id="notes-container">
                        <!-- Notes will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Calendar Tab -->
            <div class="tab-pane fade" id="calendar" role="tabpanel">
                <div class="mt-4">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h4 data-translate="calendar_title">–ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã</h4>
                        <button class="btn btn-primary" onclick="showAddEventModal()" data-translate="calendar_add_event">–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ</button>
                    </div>
                    
                    <div class="row">
                        <!-- Calendar Navigation -->
                        <div class="col-12 mb-3">
                            <div class="card">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <button class="btn btn-outline-secondary" onclick="changeMonth(-1)">
                                            <i class="bi bi-chevron-left"></i> <span data-translate="prev_month">–ü—Ä–µ–¥—ã–¥—É—â–∏–π</span>
                                        </button>
                                        <h5 class="mb-0" id="current-month-year">–ê–≤–≥—É—Å—Ç 2025</h5>
                                        <button class="btn btn-outline-secondary" onclick="changeMonth(1)">
                                            <span data-translate="next_month">–°–ª–µ–¥—É—é—â–∏–π</span> <i class="bi bi-chevron-right"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Calendar Grid -->
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-bordered calendar-table" id="calendar-grid">
                                            <thead>
                                                <tr>
                                                    <th data-translate="monday">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</th>
                                                    <th data-translate="tuesday">–í—Ç–æ—Ä–Ω–∏–∫</th>
                                                    <th data-translate="wednesday">–°—Ä–µ–¥–∞</th>
                                                    <th data-translate="thursday">–ß–µ—Ç–≤–µ—Ä–≥</th>
                                                    <th data-translate="friday">–ü—è—Ç–Ω–∏—Ü–∞</th>
                                                    <th data-translate="saturday">–°—É–±–±–æ—Ç–∞</th>
                                                    <th data-translate="sunday">–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ</th>
                                                </tr>
                                            </thead>
                                            <tbody id="calendar-body">
                                                <!-- Calendar days will be generated here -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Admin Panel Tab -->
            <div class="tab-pane fade" id="admin" role="tabpanel">
                <div class="mt-4">
                    <h4 data-translate="admin_title">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h4>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 data-translate="admin_users_title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h5>
                                </div>
                                <div class="card-body">
                                    <button class="btn btn-success" onclick="addUser()" data-translate="admin_add_user">–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
                                    <div id="users-list" class="mt-3">
                                        <!-- Users list will be loaded here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 data-translate="admin_data_title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏</h5>
                                </div>
                                <div class="card-body">
                                    <div class="d-grid gap-2">
                                        <button class="btn btn-info" onclick="exportData()" data-translate="admin_export">–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
                                        <button class="btn btn-warning" onclick="importData()" data-translate="admin_import">–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
                                        <button class="btn btn-danger" onclick="clearData()" data-translate="admin_clear">–û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Event Modal -->
    <div class="modal fade" id="addEventModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" data-translate="calendar_add_event">–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="add-event-form">
                        <div class="mb-3">
                            <label class="form-label" data-translate="event_title">–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è</label>
                            <input type="text" class="form-control" id="event-title" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label" data-translate="event_date">–î–∞—Ç–∞</label>
                            <input type="date" class="form-control" id="event-date" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label" data-translate="event_time">–í—Ä–µ–º—è</label>
                            <input type="time" class="form-control" id="event-time">
                        </div>
                        <div class="mb-3">
                            <label class="form-label" data-translate="event_type">–¢–∏–ø —Å–æ–±—ã—Ç–∏—è</label>
                            <select class="form-select" id="event-type">
                                <option value="delivery" data-translate="event_delivery">–ü–æ—Å—Ç–∞–≤–∫–∞</option>
                                <option value="meeting" data-translate="event_meeting">–°–æ–≤–µ—â–∞–Ω–∏–µ</option>
                                <option value="maintenance" data-translate="event_maintenance">–¢–µ—Ö–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ</option>
                                <option value="other" data-translate="event_other">–î—Ä—É–≥–æ–µ</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label" data-translate="event_description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                            <textarea class="form-control" id="event-description" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-translate="cancel_btn">–û—Ç–º–µ–Ω–∞</button>
                    <button type="button" class="btn btn-primary" onclick="addCalendarEvent()" data-translate="save_btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Event Details Modal -->
    <div class="modal fade" id="eventDetailsModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="event-details-title">–î–µ—Ç–∞–ª–∏ —Å–æ–±—ã—Ç–∏—è</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="event-details-body">
                    <!-- Event details will be shown here -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" onclick="deleteEvent()" id="delete-event-btn" style="display: none;">
                        <i class="bi bi-trash"></i> <span data-translate="delete_btn">–£–¥–∞–ª–∏—Ç—å</span>
                    </button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-translate="close_btn">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="js/main.js"></script>
    
    <script>
        // Check authentication on page load
        document.addEventListener('DOMContentLoaded', function() {
            checkAuth();
        });
    </script>
</body>
</html>
