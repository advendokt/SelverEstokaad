# –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

## –û–ø–∏—Å–∞–Ω–∏–µ

–ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è Estakaadi Planner –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- üì¶ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ –æ–¥–Ω–æ–º JSON —Ñ–∞–π–ª–µ
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- üíæ **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤
- üîí **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞** - —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üìä **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚ö° **GitHub Pages —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ö–æ—Å—Ç–∏–Ω–≥–∞—Ö

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª: `data/storage.json`

```json
{
  "version": "1.0.0",
  "lastUpdated": "2025-08-07T00:00:00.000Z",
  "metadata": {
    "appName": "Estakaadi Planner",
    "storageFormat": "centralized",
    "backupCount": 0
  },
  "users": [...],
  "schedule": {...},
  "notes": {...},
  "gallery": {...},
  "companies": {...},
  "settings": {...},
  "logs": {...}
}
```

## API —Å–∏—Å—Ç–µ–º—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

```javascript
const storage = new DataStorage();
await storage.init();
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
```javascript
// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Ä–∞–∑–¥–µ–ª–∞
const notes = storage.get('notes');

// –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
const note = storage.get('notes', 'note_id_123');
```

#### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
```javascript
// –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Ä–∞–∑–¥–µ–ª–∞
await storage.set('notes', notesArray, 'username');

// –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç
await storage.add('notes', newNote, 'username');

// –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç
await storage.update('notes', 'note_id_123', updates, 'username');

// –£–¥–∞–ª–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç
await storage.delete('notes', 'note_id_123', 'username');
```

#### –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
```javascript
// –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É
const results = storage.search('notes', '–ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å');

// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É—Å–ª–æ–≤–∏—é
const filtered = storage.filter('notes', note => note.priority === 'high');

// –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
const sorted = storage.sort('notes', (a, b) => new Date(b.createdAt) - new Date(a.createdAt));
```

### –°–æ–±—ã—Ç–∏—è —Å–∏—Å—Ç–µ–º—ã

```javascript
// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
storage.on('dataLoaded', (data) => {
    console.log('–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
});

storage.on('dataSaved', (data) => {
    console.log('–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
});

storage.on('dataChanged', ({section, data, userId}) => {
    console.log(`–ò–∑–º–µ–Ω–µ–Ω —Ä–∞–∑–¥–µ–ª: ${section}`);
});
```

## –†–∞–∑–¥–µ–ª—ã –¥–∞–Ω–Ω—ã—Ö

### 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (`users`)
```json
{
  "id": "user_001",
  "username": "maksim",
  "role": "admin",
  "name": "–ú–∞–∫—Å–∏–º",
  "createdAt": "2025-01-01T00:00:00.000Z",
  "lastLogin": null,
  "permissions": ["read", "write", "delete"]
}
```

### 2. –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ (`schedule`)
```json
{
  "day": "monday",
  "dayName": "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫",
  "companies": ["A. Le coq", "Coca-Cola"]
}
```

### 3. –ó–∞–º–µ—Ç–∫–∏ (`notes`)
```json
{
  "id": "note_001",
  "title": "–ó–∞–≥–æ–ª–æ–≤–æ–∫",
  "content": "–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏",
  "createdBy": "maksim",
  "createdAt": "2025-08-07T00:00:00.000Z"
}
```

### 4. –ì–∞–ª–µ—Ä–µ—è (`gallery`)
```json
{
  "id": "photo_001",
  "filename": "example.jpg",
  "title": "–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ",
  "category": "company",
  "company": "A. Le coq",
  "data": "data:image/jpeg;base64,/9j/4AAQ...",
  "size": 1024000,
  "createdBy": "maksim",
  "createdAt": "2025-08-07T00:00:00.000Z"
}
```

### 5. –ö–æ–º–ø–∞–Ω–∏–∏ (`companies`)
```json
{
  "id": "a_le_coq",
  "name": "A. Le coq",
  "displayName": "A. Le coq",
  "category": "beverages",
  "active": true,
  "instructionsPath": "img/instructions/brands/a-le-coq/",
  "photosPath": "img/A. Le coq/"
}
```

### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (`settings`)
```json
{
  "defaultLanguage": "ru",
  "theme": "light",
  "autoBackup": true,
  "maxStorageSize": 50
}
```

### 7. –ñ—É—Ä–Ω–∞–ª —Å–æ–±—ã—Ç–∏–π (`logs`)
```json
{
  "id": "log_001",
  "timestamp": "2025-08-07T00:00:00.000Z",
  "user": "maksim",
  "action": "data_update",
  "details": "Updated section: notes",
  "ipAddress": "127.0.0.1"
}
```

## –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ

### –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
```javascript
await exportAllData(); // –°–∫–∞—á–∏–≤–∞–µ—Ç JSON —Ñ–∞–π–ª —Å–æ –≤—Å–µ–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```

### –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
```javascript
await importData(); // –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ JSON —Ñ–∞–π–ª–∞
```

### –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```javascript
await clearAllData(); // –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ (—Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ)
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
```javascript
const stats = storage.getStorageStats();
console.log(stats.formattedSize); // "2.5 MB"
```

## –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∏–≥—Ä–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å—Ç–∞—Ä—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤:

1. **–ó–∞–º–µ—Ç–∫–∏** - –∏–∑ `data/notes.json` –∏ `localStorage['notes']`
2. **–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ** - –∏–∑ `data/schedule.json`
3. **–ì–∞–ª–µ—Ä–µ—è** - –∏–∑ `localStorage['gallery']`

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å GitHub Pages

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:
1. **–ß—Ç–µ–Ω–∏–µ**: –°–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å `data/storage.json`
2. **–ó–∞–ø–∏—Å—å**: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `localStorage` (GitHub Pages - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ö–æ—Å—Ç–∏–Ω–≥)
3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –ú–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏ —á–µ—Ä–µ–∑ Storage Events
4. **–†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ `localStorage`

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:
1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π GitHub
2. –í–∫–ª—é—á–∏—Ç–µ GitHub Pages
3. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞:
- **–ê–¥–º–∏–Ω—ã**: –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –¥–∞–Ω–Ω—ã–º
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–≤–æ–∏–º –¥–∞–Ω–Ω—ã–º
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –∂—É—Ä–Ω–∞–ª

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ:
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ**: –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–º–ø–æ—Ä—Ç–µ –¥–∞–Ω–Ω—ã—Ö
- **–†—É—á–Ω–æ–µ**: —ç–∫—Å–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
- **–õ–æ–∫–∞–ª—å–Ω–æ–µ**: —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –≤ `localStorage`

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**: –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â—É
- **–°–∂–∞—Ç–∏–µ**: JSON –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
- **–ü–∞–≥–∏–Ω–∞—Ü–∏—è**: –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
- **localStorage**: ~5-10MB –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –±—Ä–∞—É–∑–µ—Ä–∞
- **JSON —Ñ–∞–π–ª**: —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ 50MB
- **–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏**: —Å–∂–∏–º–∞—é—Ç—Å—è –≤ Base64 —Ñ–æ—Ä–º–∞—Ç

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ú–µ—Ç—Ä–∏–∫–∏:
- –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º
- –ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –∫–≤–æ—Ç
- –û—à–∏–±–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –£—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ localStorage –¥–æ—Å—Ç—É–ø–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏
4. –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ø–µ—Ä–µ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏
